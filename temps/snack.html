<html>
{% load static %}
<head>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI=" crossorigin="anonymous"></script>
    <style>
        .col{
            border: 7px outset yellowgreen;
            width: 60px;
            border-radius: 30px;
            background-color: white;
            height: 60px;
            font-size: 30px;
            text-align: center;
            box-shadow: 2px 14px 6px 3px grey;
            margin: 2%;
            margin-bottom: 0.9%
        }

        {{style}}

    #c100{border: 17px inset aqua;height: 80px;border-radius: 50%}

        
        
        .row{
            width: 100%;
            padding: 0%;margin: 0%
/*            border: 3px outset red;*/
        }
        
        .plate{
            width: 100%;
            padding-bottom: 10%;
            padding-left: 5%;
            padding-right: 5%;
        }
        .ran,.di{
            background-color: blue;
            color: white;
            box-shadow: 3px 14px 15px 16px grey;
            width: 22%;
            height: 140px;
            font-size: 85px;
            border-radius: 50%;
            margin-top: -6%
        }
        .button-29 {
  align-items: center;
  appearance: none;
  background-image: radial-gradient(100% 100% at 100% 0, #5adaff 0, #5468ff 100%);
  border: 0;
  border-radius: 16px;
  box-shadow: rgba(45, 35, 66, .4) 0 2px 4px,rgba(45, 35, 66, .3) 0 7px 13px -3px,rgba(58, 65, 111, .5) 0 -3px 0 inset;
  box-sizing: border-box;
  color: #fff;
  cursor: pointer;
  display: inline-flex;
  font-family: "JetBrains Mono",monospace;
  height: 80px;
  justify-content: center;
  line-height: 1;
  list-style: none;
  overflow: hidden;
  padding:16px;
  text-align: center;
  text-decoration: none;
  transition: box-shadow .15s,transform .15s;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
  white-space: nowrap;
  will-change: box-shadow,transform;
  font-size: 60px;
}

.button-29:focus {
  box-shadow: #3c4fe0 0 0 0 1.5px inset, rgba(45, 35, 66, .4) 0 2px 4px, rgba(45, 35, 66, .3) 0 7px 13px -3px, #3c4fe0 0 -3px 0 inset;
}

.button-29:hover {
  box-shadow: rgba(45, 35, 66, .4) 0 4px 8px, rgba(45, 35, 66, .3) 0 7px 13px -3px, #3c4fe0 0 -3px 0 inset;
  transform: translateY(-2px);
}

.button-29:active {
  box-shadow: #3c4fe0 0 3px 7px inset;
  transform: translateY(2px);
}
    </style>  
  </head>
  <body>


    <audio autoplay loop id="bg">
        <source src="{% static 'images/bg.mp3' %}" type="audio/mpeg">
      Your browser does not support the audio element.
      </audio>

      
    <audio id="die">
        <source src="{% static 'images/die.mp3' %}" type="audio/mp3">
      Your browser does not support the audio element.
      </audio>

      
    <audio id="black">
        <source src="{% static 'images/black.mp3' %}" type="audio/mp3">
      Your browser does not support the audio element.
      </audio>

      
    <audio id="happy">
        <source src="{% static 'images/Happy.mp3' %}" type="audio/mp3">
      Your browser does not support the audio element.
      </audio>

    <audio id="walk">
        <source src="{% static 'images/walk.mp3' %}" type="audio/mp3">
      Your browser does not support the audio element.
      </audio>

    <audio id="dice">
        <source src="{% static 'images/dice.mp3' %}" type="audio/mp3">
      Your browser does not support the audio element.
      </audio>


    <div class="plate">
    <div class="row">
        <div class='col' id=c1>1</div>
        <div class='col' id=c2>2</div>
        <div class='col' id=c3>3</div>
        <div class='col' id=c4>4</div>
        <div class='col' id=c5>5</div>
        <div class='col' id=c6>6</div>
        <div class='col' id=c7>7</div>
        <div class='col' id=c8>8</div>
        <div class='col' id=c9>9</div>
        <div class='col' id=c10>10</div>
        <div class='col' id=c11>11</div>
        <div class='col' id=c12>12</div>
      </div>
       <div class="row">
        <div class='col' id=c13>13</div>
        <div class='col' id=c14>14</div>
        <div class='col' id=c15>15</div>
        <div class='col' id=c16>16</div>
        <div class='col' id=c17>17</div>
        <div class='col' id=c18>18</div>
        <div class='col' id=c19>19</div>
        <div class='col' id=c20>20</div>
        <div class='col' id=c21>21</div>
        <div class='col' id=c22>22</div>
        <div class='col' id=c23>23</div>
        <div class='col' id=c24>24</div>
      </div>
       <div class="row">
        <div class='col' id=c25>25</div>
        <div class='col' id=c26>26</div>
        <div class='col' id=c27>27</div>
        <div class='col' id=c28>28</div>
        <div class='col' id=c29>29</div>
        <div class='col' id=c30>30</div>
        <div class='col' id=c31>31</div>
        <div class='col' id=c32>32</div>
        <div class='col' id=c33>33</div>
        <div class='col' id=c34>34</div>
        <div class='col' id=c35>35</div>
        <div class='col' id=c36>36</div>
        </div>
       <div class="row">
        <div class='col' id=c37>37</div>
        <div class='col' id=c38>38</div>
        <div class='col' id=c39>39</div>
        <div class='col' id=c40>40</div>
        <div class='col' id=c41>41</div>
        <div class='col' id=c42>42</div>
        <div class='col' id=c43>43</div>
        <div class='col' id=c44>44</div>
        <div class='col' id=c45>45</div>
        <div class='col' id=c46>46</div>
        <div class='col' id=c47>47</div>
        <div class='col' id=c48>48</div>
        </div>
       <div class="row">
        <div class='col' id=c49>49</div>
        <div class='col' id=c50>50</div>
        <div class='col' id=c51>51</div>
        <div class='col' id=c52>52</div>
        <div class='col' id=c53>53</div>
        <div class='col' id=c54>54</div>
        <div class='col' id=c55>55</div>
        <div class='col' id=c56>56</div>
        <div class='col' id=c57>57</div>
        <div class='col' id=c58>58</div>
        <div class='col' id=c59>59</div>
        <div class='col' id=c60>60</div>
        </div>
       <div class="row">
        <div class='col' id=c61>61</div>
        <div class='col' id=c62>62</div>
        <div class='col' id=c63>63</div>
        <div class='col' id=c64>64</div>
        <div class='col' id=c65>65</div>
        <div class='col' id=c66>66</div>
        <div class='col' id=c67>67</div>
        <div class='col' id=c68>68</div>
        <div class='col' id=c69>69</div>
        <div class='col' id=c70>70</div>
        <div class='col' id=c71>71</div>
        <div class='col' id=c72>72</div>
        </div>
       <div class="row">
        <div class='col' id=c73>73</div>
        <div class='col' id=c74>74</div>
        <div class='col' id=c75>75</div>
        <div class='col' id=c76>76</div>
        <div class='col' id=c77>77</div>
        <div class='col' id=c78>78</div>
        <div class='col' id=c79>79</div>
        <div class='col' id=c80>80</div>
        <div class='col' id=c81>81</div>
        <div class='col' id=c82>82</div>
        <div class='col' id=c83>83</div>
        <div class='col' id=c84>84</div>
        </div>
       <div class="row">
        <div class='col' id=c85>85</div>
        <div class='col' id=c86>86</div>
        <div class='col' id=c87>87</div>
        <div class='col' id=c88>88</div>
        <div class='col' id=c89>89</div>
        <div class='col' id=c90>90</div>
        <div class='col' id=c91>91</div>
        <div class='col' id=c92>92</div>
        <div class='col' id=c93>93</div>
        <div class='col' id=c94>94</div>
        <div class='col' id=c95>95</div>
        <div class='col' id=c96>96</div>
        </div>
       <div class="row">
        <div class='col' id=c97>97</div>
        <div class='col' id=c98>98</div>
        <div class='col' id=c99>99</div>
        </div>
        <div class="row">
        <div class='col' id=c100>100</div>
        </div>
        
    </div>
    <center>
    
    <div class="di">
        ?
    </div>
    <div class="ran" style="text-align: center">
    </div>
    </center>
    
    <button class="left button-29" style="position: fixed;top: 87.7%;left: 7%" >Click</button>
    <button class="right button-29" style="position: fixed;top: 87.7%;left: 74%">Click</button>
    <center>
    <h1 class='msg' style="font-size: 150px;margin-top: 60%"></h1>
       </center>
       
       <script>



//audios

var die = document.getElementById('die')
var black = document.getElementById('black')
var happy = document.getElementById('happy')
var walk = document.getElementById('walk')
var dice = document.getElementById('dice')

        $(".ran").hide()
        $(".msg").hide()
        $(".right").hide()
        
        setInterval(function(){
            var c = Math.floor(Math.random() * 6);
            $(".ran").text(c)
        },10)
        
        function blue(){
            $(".left").hide(200)
            $(".ran").hide()
            var ran_num = Math.floor(Math.random() * 6);
            $('.di').text(ran_num)
            $('.di').show()
            var cell = get_pos_by_id(window.currnet_blue_pos)
            
            if (ran_num == 0 || ran_num+cell > 100 ){
            setTimeout(function(){
                $(".right").show()
            },500)
            }
            else{
                setTimeout(function(){
                move_blue(ran_num)                    
                },500)
            }
        }
        function red(){
            $(".right").hide(200)
            var ran_num = Math.floor(Math.random() * 6);
            
            $(".ran").hide()
            $('.di').text(ran_num)
            $('.di').show()

            var cell = get_pos_by_id(window.currnet_red_pos)
            
            if (ran_num == 0 || ran_num+cell > 100 ){
            setTimeout(function(){
                $(".left").show()
            },500)
            }
            else{
                 setTimeout(function(){
                move_red(ran_num)                    
                },500)
            }
        }
        
        $('.left').click(function(){
            dice.play()
            $(".ran").show()
            $(".di").hide()
            setTimeout(function(){
                blue()
            },500)
        })
        
        $('.right').click(function(){
            dice.play()
            $(".ran").show()
            $(".di").hide()
            setTimeout(function(){
                red()
            },500)
        })
        
        
        
        function int_num(num){
            num = String(num/2)
            
            return Math.floor(num) 
        }
        
        function get_pos_by_id(id){
            id = id.replace('#c','')
            return Number(id)
        }
        
        function set_id_by_num(num){
            id = "#c"+String(num)
            return id
        }
        
        
        $("#c1").css('background-color','blue')
        var currnet_blue_pos = "#c1"
        var currnet_red_pos = "#c1"
        setInterval(function(){
            if (currnet_blue_pos == currnet_red_pos)
                {
                    $(currnet_blue_pos).css('background-color','darkmagenta')
                }
        })
        
        function add_id(cell,num){
        var actual_cell = cell.replace("#c","")
        cell = Number(actual_cell)
        cell = cell + num
        if (cell < 0){
            cell = 1
        }
        var final_cell = "#c"+String(cell)
        return final_cell
        }
        //blue move
        function move_blue(num){
            var now = 1
            var ref = 0
            if (num == 0){
                ref = 0
            }
            else if(num > 0)
            {
                ref = 1
            }
            else{
                ref= -1
            }
            var b_m = setInterval(blue_mover,100)
            function blue_mover (){
            var pos = window.currnet_blue_pos 

            var target_pos = add_id(pos,ref)
            $(pos).css('background-color','white')
            $(window.currnet_red_pos).css('background-color','red')
            $(target_pos).css('background-color','blue')
            // walk.play()
            window.currnet_blue_pos = target_pos    
                now++
            if (num < now ){
                if(window.currnet_blue_pos == window.currnet_red_pos){
                    if ($(window.currnet_blue_pos).css("border-color") == "rgb(255, 0, 0)"){
                        die.play()
                        var cell = get_pos_by_id(window.currnet_red_pos)
                        var target_cell = int_num(cell)
                        var target_pos = set_id_by_num(target_cell)
                        window.currnet_red_pos = target_pos
                        setTimeout(function(){
                        $(window.currnet_red_pos).css('background-color','red')                            
                        },500)

                    }
                }
                else if($(window.currnet_blue_pos).css("border-color") == "rgb(0, 0, 0)"){
                    black.play()
                    var current_cell = get_pos_by_id(window.currnet_blue_pos)
                    var target_cell = Math.floor((Math.random() * current_cell) +1)
                    var target_pos = set_id_by_num(target_cell)
                    var res = String(target_cell-current_cell)
                    $('.di').text(res)
                    setTimeout(function(){
                    $(window.currnet_blue_pos).css("background-color",'white')
                    window.currnet_blue_pos = target_pos
                    $(window.currnet_blue_pos).css('background-color','blue')                            
                    },500)
                }
                else if($(window.currnet_blue_pos).css("border-color") == "rgb(255, 215, 0)"){
                    happy.play()
                    var current_cell = get_pos_by_id(window.currnet_blue_pos)
                    var target_cell = randome_number(current_cell)
                    var target_pos = set_id_by_num(target_cell)
                    var res = String(target_cell-current_cell)
                    $('.di').text("+"+res)                    
                    setTimeout(function(){
                    $(window.currnet_blue_pos).css("background-color",'white')
                    window.currnet_blue_pos = target_pos
                    $(window.currnet_blue_pos).css('background-color','blue')                            
                    },500)
                }
            clearInterval(b_m);
            if (currnet_red_pos != "#c100"){
            $('.right').show(200)                
            }
            }
            }
        }
        //red move
        function move_red(num){
            var now = 1
            var ref = 0
            if (num == 0){
                ref = 0
            }
            else if(num > 0)
            {
                ref = 1
            }
            else{
                ref= -1
            }

            var r_m = setInterval(red_mover,100)
            function red_mover (){
            var pos = window.currnet_red_pos 

            var target_pos = add_id(pos,ref)
            $(pos).css('background-color','white')
            $(window.currnet_blue_pos).css('background-color','blue')
            $(target_pos).css('background-color','red')
            // walk.play()
            window.currnet_red_pos = target_pos    
            
            now = now + 1
                if (num < now ){
                    if(window.currnet_blue_pos == window.currnet_red_pos){
                    if ($(window.currnet_blue_pos).css("border-color") == "rgb(255, 0, 0)"){
                        die.play()
                        var cell = get_pos_by_id(window.currnet_blue_pos)
                        console.log(cell)
                        var target_cell = int_num(cell)
                        console.log(cell)
                        var target_pos = set_id_by_num(target_cell)
                        console.log(target_pos)
                        window.currnet_blue_pos = target_pos
                        console.log(target_pos)
                        setTimeout(function(){
                        $(window.currnet_blue_pos).css('background-color','blue')
                        },500)
                    }
                }
                else if($(window.currnet_red_pos).css("border-color") == "rgb(0, 0, 0)"){
                    black.play()
                    var current_cell = get_pos_by_id(window.currnet_red_pos)
                    var target_cell = Math.floor((Math.random() * current_cell) +1)
                    var target_pos = set_id_by_num(target_cell)
                    var res = String(target_cell-current_cell)
                    $('.di').text(res)
                    setTimeout(function(){
                    $(window.currnet_red_pos).css("background-color",'white')
                    window.currnet_red_pos = target_pos
                    $(window.currnet_red_pos).css('background-color','red')                            
                    },500)
                }
                else if($(window.currnet_red_pos).css("border-color") == "rgb(255, 215, 0)"){
                    happy.play()
                    var current_cell = get_pos_by_id(window.currnet_red_pos)
                    var target_cell = randome_number(current_cell)
                    var target_pos = set_id_by_num(target_cell)
                    var res = String(target_cell-current_cell)
                    $('.di').text("+"+res)                    
                    setTimeout(function(){
                    $(window.currnet_red_pos).css("background-color",'white')
                    window.currnet_red_pos = target_pos
                    $(window.currnet_red_pos).css('background-color','red')                            
                    },500)
                }
            clearInterval(r_m);
            if (currnet_red_pos != "#c100"){
            $('.left').show(200)                
            }
            }
            }
        }
         
//        wining 
        
        setInterval(function(){
            if($("#c100").css("background-color") == "rgb(0, 0, 255)")
            {
                $('.plate').hide(500)
                $('.left').hide()
                $('.right').hide()
                $('.di').hide()
                $('.ran').hide()
                $('.msg').html("Blue win...!<br><br><center><a class='btn btn-success' href='/' style='width:80%'>home</a></center>")
                $('.msg').css("color",'blue')
                $('.msg').show(500)
            }
            else if($("#c100").css("background-color") == "rgb(255, 0, 0)")
            {
                $('.plate').hide(500)
                $('.left').hide()
                $('.right').hide()
                $('.di').hide()
                $('.ran').hide()
                $('.msg').html("Red win...!<br><br><center><a class='btn btn-success' href='/' style='width:80%'>home</a></center>")
                $('.msg').css("color",'red')
                $('.msg').show(500)                

            }
        
        })
           
        function randome_number(num){
            var r_num = Math.floor(Math.random()*100)+num
            
            while(r_num>100){
                r_num = Math.floor(Math.random()*100)+num
            }
            return r_num
        }
           
        var red_run = false
        var blue_run = false
        
        function check_blue(){
            
        }
        
        //20 -- gold
        //30 -- black
        //20 -- red
     </script>
      </body>
    
    
    </html>